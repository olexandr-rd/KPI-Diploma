<!-- monitoring/templates/dashboard/partials/stats.html -->
<div class="col-md-4 col-lg-3">
    <div class="card shadow-sm stat-card border-primary-left">
        <div class="card-body p-3">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <div class="text-muted small">Логи енергосистеми</div>
                    <div class="stat-value">{{ stats.total_logs }}</div>
                </div>
                <div class="fs-1 text-primary opacity-25">
                    <i class="bi bi-database"></i>
                </div>
            </div>
            <div class="mt-2 small">
                <span class="text-info"><i class="bi bi-info-circle"></i> Ручні - {{ stats.manual_count }} , автоматичні - {{ stats.auto_count }}</span>
            </div>
        </div>
    </div>
</div>

<div class="col-md-4 col-lg-3">
    <div class="card shadow-sm stat-card border-danger-left">
        <div class="card-body p-3">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <div class="text-muted small">Виявлені аномалії</div>
                    <div class="stat-value">{{ stats.anomaly_count }}</div>
                </div>
                <div class="fs-1 text-danger opacity-25">
                    <i class="bi bi-exclamation-triangle"></i>
                </div>
            </div>
            <div class="mt-2 small">
                <span class="text-danger"><i class="bi bi-percent"></i> {{ stats.anomaly_percentage|floatformat:1 }}% від усіх записів</span>
            </div>
        </div>
    </div>
</div>

<div class="col-md-4 col-lg-3">
    <div class="card shadow-sm stat-card border-success-left">
        <div class="card-body p-3">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <div class="text-muted small">Резервні копії</div>
                    <div class="stat-value">{{ stats.backup_success }}</div>
                </div>
                <div class="fs-1 text-success opacity-25">
                    <i class="bi bi-cloud-check"></i>
                </div>
            </div>
            <div class="mt-2 small">
                <span class="text-danger"><i class="bi bi-x-circle"></i> Невдалі - {{ stats.backup_failed }}</span>
            </div>
        </div>
    </div>
</div>

<div class="col-md-4 col-lg-3">
    <div class="card shadow-sm stat-card border-info-left">
        <div class="card-body p-3">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <div class="text-muted small">Використано пам'яті</div>
                    <div class="stat-value">{{ stats.storage_used|floatformat:2 }} МБ</div>
                </div>
                <div class="fs-1 text-info opacity-25">
                    <i class="bi bi-hdd"></i>
                </div>
            </div>
            <div class="mt-2 small">
                <span class="text-primary"><i class="bi bi-clock"></i> {{ stats.retention_days }} дн. зберігання</span>
            </div>
        </div>
    </div>
</div>

<div class="col-sm-12 col-md-6 col-lg-6">
    <div class="card shadow-sm">
        <div class="card-body p-3">
            <h6 class="card-title"><i class="bi bi-sliders"></i> Параметри логування</h6>
            <ul class="list-group list-group-flush small">
                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    <span><i class="bi bi-stopwatch text-success"></i> Інтервал логування даних</span>
                    <span class="badge bg-success">{{ stats.data_collection_interval }} хв</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    <span><i class="bi bi-clock-history text-primary"></i> Частота резервування</span>
                    <span class="badge bg-primary">{{ stats.backup_frequency_hours }} год</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    <span><i class="bi bi-archive text-success"></i> Максимум записів</span>
                    <span class="badge bg-success">{{ stats.max_logs_kept }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    <span><i class="bi bi-server text-info"></i> Максимум резервних копій</span>
                    <span class="badge bg-info">{{ stats.max_backups_kept }}</span>
                </li>
{#                <li class="list-group-item d-flex justify-content-between align-items-center px-0">#}
{#                    <span><i class="bi bi-tools text-secondary"></i> Час обслуговування</span>#}
{#                    <span class="badge bg-secondary">{{ stats.maintenance_time|time:"H:i" }}</span>#}
{#                </li>#}
            </ul>
        </div>
    </div>
</div>

<div class="col-sm-12 col-md-6 col-lg-6">
    <div class="card shadow-sm">
        <div class="card-body p-3">
            <h6 class="card-title"><i class="bi bi-calendar-event"></i> Розклад логування</h6>
            <ul class="list-group list-group-flush small">
                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    <span><i class="bi bi-clock text-info"></i> Наступний збір даних</span>
                    <span class="badge bg-info">{{ stats.next_data_collection|date:"H:i:s, d.m.Y" }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    <span><i class="bi bi-cloud-arrow-up text-primary"></i> Наступне резервування</span>
                    <span class="badge bg-primary">{{ stats.next_backup|date:"H:i:s, d.m.Y" }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    <span><i class="bi bi-gear text-secondary"></i> Наступне обслуговування</span>
                    <span class="badge bg-secondary">{{ stats.next_maintenance|date:"H:i:s, d.m.Y" }}</span>
                </li>
            </ul>
        </div>
    </div>
</div>

{#<div class="col-md-4 col-lg-4">#}
{#    <div class="card shadow-sm {% if stats.scheduler_active %}bg-success bg-opacity-10{% else %}bg-danger bg-opacity-10{% endif %}">#}
{#        <div class="card-body p-3">#}
{#            <h6 class="card-title"><i class="bi bi-activity"></i> Стан системи</h6>#}
{#            <div class="d-flex justify-content-between align-items-center mb-3">#}
{#                <span class="text-muted">Статус планувальника</span>#}
{#                {% if stats.scheduler_active %}#}
{#                    <span class="badge bg-success">{{ stats.scheduler_status }}</span>#}
{#                {% else %}#}
{#                    <span class="badge bg-danger">{{ stats.scheduler_status }}</span>#}
{#                {% endif %}#}
{#            </div>#}
{#            <div class="progress mb-2" style="height: 8px;">#}
{#                <div class="progress-bar {% if stats.scheduler_active %}bg-success{% else %}bg-danger{% endif %}"#}
{#                    role="progressbar" style="width: 100%;"#}
{#                    aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>#}
{#            </div>#}
{#            <div class="small text-muted">#}
{#                <i class="bi bi-info-circle"></i> Остання перевірка: {{ stats.last_scheduler_check|timesince }} тому#}
{#            </div>#}
{#            {% if user.profile.is_manager %}#}
{#                <div class="mt-2">#}
{#                    <a href="{% url 'scheduler_status' %}" class="btn btn-sm btn-outline-primary w-100">#}
{#                        <i class="bi bi-gear"></i> Керувати планувальником#}
{#                    </a>#}
{#                </div>#}
{#            {% endif %}#}
{#        </div>#}
{#    </div>#}
{#</div>#}